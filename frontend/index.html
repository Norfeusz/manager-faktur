<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatyzacja Faktur</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body class="container mt-4">

    <h1>Narzƒôdzie do Faktur</h1>

    <div class="row mb-4">
        <div class="col-md-8 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Pamiƒôtaj ma≈Çolat, faktura musi siƒô sensownie nazywaƒá.</h5>
                    <p class="card-text">We≈∫ co≈õ przekmi≈Ñ</p>
                    <div class="mb-3">
                        <label for="fileSelect" class="form-label">Wybierz plik z sortowni:</label>
                        <select id="fileSelect" class="form-select"></select>
                    </div>
                    <div class="mb-3">
                        <label for="invoiceName" class="form-label">Nazwa</label>
                        <input type="text" id="invoiceName" class="form-control" list="invoiceName-suggestions"
                            placeholder="Wybierz z listy lub wpisz w≈ÇasnƒÖ nazwƒô...">
                        <datalist id="invoiceName-suggestions">
                            <option value="superdevs">
                            <option value="congitva">
                            <option value="cognitiva przelew netto">
                            <option value="cognitiva-przelew-vat">
                            <option value="ksiƒôgowy">
                            <option value="paliwo tipo mol">
                            <option value="wypo≈ºyczenie laptopa">
                            <option value="autostrada">
                        </datalist>
                    </div>
                    <div class="mb-3">
                        <label for="invoiceDate" class="form-label">Data wystawienia faktury:</label>
                        <input type="date" id="invoiceDate" class="form-control">
                    </div>

                    <div class="row g-2 mt-auto">
                        <div class="col-sm-4">
                            <div class="d-grid gap-2">
                                <button id="addToZipBtn" class="btn btn-dark-red">Dodaj do ZIP</button>
                                <button id="customNameBtn" class="btn btn-secondary">Nazwa niestandardowa</button>
                            </div>
                        </div>
                        <div class="col-sm-8">
                            <div class="d-grid h-100">
                                <button id="processBtn" class="btn btn-primary">Zmie≈Ñ nazwƒô i przenie≈õ</button>
                            </div>
                        </div>
                    </div>

                    <div id="processStatus" class="mt-3"></div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-primary h-100">
                <div class="card-header fw-bold">Bez tych faktur nie przejdzie:</div>
                <div class="card-body">
                    <ul id="missingInvoicesList" class="list-group">
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-md-6 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Pakuj cz≈Çeniu!</h5>
                    <p>Spakuj wszystkie pliki z folderu "pakowalnia" lub zarzƒÖdzaj nimi.</p>
                    <div class="d-grid gap-2 d-sm-flex mt-auto">
                        <button id="showPackedFilesBtn" class="btn btn-brown">Poka≈º mi swoje towary</button>
                        <button id="packBtn" class="btn btn-info flex-grow-1">Spakuj pliki do ZIP</button>
                    </div>
                    <div id="packStatus" class="mt-3"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Zipera!</h5>
                    <p>ZarzƒÖdzaj gotowymi archiwami lub wy≈õlij ostatnie do adresata.</p>
                    <div class="d-grid gap-2 d-sm-flex mt-auto">
                        <button id="showZipManagerBtn" class="btn btn-dark">Poka≈º ZIP Sk≈Çad</button>
                        <button id="sendEmailBtn" class="btn btn-success flex-grow-1" disabled>Wy≈õlij e-mail</button>
                    </div>
                    <div id="sendStatus" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Krok 0: Konwerter PNG/JPG do PDF</h5>
            <p>Je≈õli otrzyma≈Çe≈õ fakturƒô w formacie obrazu, mo≈ºesz jƒÖ tutaj przekonwertowaƒá do formatu PDF. Plik trafi do sortowni.</p>
            <div class="mb-3">
                <label for="imageUpload" class="form-label">Wybierz plik PNG lub JPG:</label>
                <input class="form-control" type="file" id="imageUpload" accept="image/png, image/jpeg">
            </div>
            <button id="convertBtn" class="btn btn-dark">Konwertuj do PDF</button>
            <div id="convertStatus" class="mt-3"></div>
        </div>
    </div>

    <div class="modal fade" id="monthSelectModal" tabindex="-1" aria-labelledby="monthModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="monthModalLabel">Jaki miesiƒÖc rozliczamy wariacie? üòé</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Wybierz miesiƒÖc i rok, kt√≥rego dotyczƒÖ faktury.</p>
                    <input type="month" id="monthInput" class="form-control">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
                    <button type="button" id="confirmPackBtn" class="btn btn-primary">Zatwierd≈∫ i pakuj</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="imageFoundModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content border-warning">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">‚ö†Ô∏è Wykryto obrazek w sortowni!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Co chcesz zrobiƒá z tym plikiem?
                    <p class="text-muted mt-2" id="imageFoundFilename"></p>
                </div>
                <div class="modal-footer d-grid gap-2">
                    <button type="button" id="showImageBtn" class="btn btn-info">Poka≈º go!</button>
                    <button type="button" id="openInGimpBtn" class="btn btn-dark">Przycinamy! (Otw√≥rz w GIMP)</button>
                    <button type="button" id="convertNowBtn" class="btn btn-warning">Prostujemy na PDF!</button>
                    <button type="button" id="leaveImageBtn" class="btn btn-secondary" data-bs-dismiss="modal">Zostawiamy jak jest</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="zipSelectModal" tabindex="-1" aria-labelledby="zipModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="zipModalLabel">Wybierz cz≈Çonka ZIP sk≈Çadu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Do kt√≥rego archiwum chcesz dodaƒá ten plik?</p>
                    <select id="zipFileSelect" class="form-select"></select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
                    <button type="button" id="confirmAddToZipBtn" class="btn btn-primary">Dodaj plik</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="fileManagerModal" tabindex="-1" aria-labelledby="fileManagerLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="fileManagerLabel">ZarzƒÖdzanie plikami w "pakowalni"</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul id="fileManagerList" class="list-group">
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="zipManagerModal" tabindex="-1" aria-labelledby="zipManagerLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="zipManagerLabel">ZarzƒÖdzanie archiwami w "ZIP Sk≈Çad"</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="accordion" id="zipManagerAccordion">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>